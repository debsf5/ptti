## Initial values and past policy changes.
meta:
  start: 2019/12/18   # ~5000 cases estimated before 28th Feb
  envelope: false
  tmax: 500
  steps: 500
  
## Initial values for the simulation
initial:
  ## N is the total population
  N:    67886011    # mid-year 2020 from: https://www.worldometers.info/world-population/uk-population/
  ## IU is the number of unconfined, infected individuals
  IU:   1

## Parameters of the simulation.
## All rates are per individual per day.
parameters:
  ## beta is the infectiousness of the disease, the
  ## probability of infecting a contact.
  beta: 0.0435
  ## c0 is contacts per day at baseline, pre-pandemic
  c0: 11   # baseline pre-pandemic (ref Polymod, UK only, & BBC Pandemic)
  c: c0
  ifr: 0.0068

  ## alpha is the rate at which exposed individuals
  ## (infected but not infectious) become infectious. 
  ## 5 day incubation period
  alpha: 0.2

  ## gamma is the rate at which individuals either 
  ## recover, or are taken into hospital and assumed
  ## to be isolated. One week.
  gamma: 0.1429

  ## kappa is the rate at which individuals leave
  ## isolation. This is one week according to UK policy.
  ## The WHO thinks it should be 0.0714 (14 days).
  ## We agree with WHO and think isolation should last for 14 symptom free days
  kappa: 0.0714

  ## testedBase is the background rate of testing
  testedBase: 0.0
  ## theta governs testing of infectious individuals, and we start with none
  theta: testedBase
  
  ## (Extra) unversal tests.
  theta_U: 0.0

  ## chi is the rate at which contacts are traced. (In fraction of contacts per case.)
  ## Tracing is triggered by testing. Starts at none.
  chi:   0.0

  ## eta is the success rate of tracing. Starts at none
  eta:   0.0

  ## scaling for targeted and universal testing
  tscale: 0.8
  tscale_fixed: 0.8 # This can't be changed in the interface. 
  uscale: 1.0

  ## default testing rate (proportion of symptomatics)
  tested: tscale
  ## 50% of SARS-Cov-2 infected (IU) have symptoms
  symptomatic: 0.5 
  ## average duration of symptomatic illness(coldflu or Covid combined)
  duration: 7
  #Background rate for early days of epidemic.
  coldflu: 0.01

## Exogenous interventions. The time is given in
## simulation days.
interventions:
  - time: 48
    name: "Past"
    parameters:
        beta: 0.03849689271026241
        c: 9.663279748154999
        ifr: 0.007096894653551129

  - time: 75
    name: "Past"
    parameters:
        beta: 0.051266109078412
        ifr: 0.006891385143585851

  - time: 89 
    name: "Past"
    parameters:
        beta: 0.050154594993111534
        c: 1.8791424908692589
        ifr: 0.00944330103384839

  - time: 136
    name: "Past"
    parameters:
        beta: 0.03652757856247421
        ifr: 0.0067174044475541705

  - time: 152  # Start testing
    name: "Past"
    parameters:
        beta: 0.02058470296591927
        c: 2.4646968846129376
        chi: 0.5
        eta: 0.42
        ifr: 0.006960151150257436
        tested: 0.18144202213884242

  ## On 4th July, pubs and entertainment venues open with new 1m distancing rule
  - time: 199
    name: "Past"
    parameters:
        beta: 0.043538528781473296
        c: 4.718496886032501
        eta: 0.47
        ifr: 0.007240284849772509
        tested: 0.2975469697110704
        testedBase: coldflu/duration*tested
        theta: testedBase + (1-testedBase)*thetaI + theta_U
        thetaI: symptomatic/duration*tested
      c: c0 * 0.37 # CoMix report week 15 (1-8th July): UK contacts per day is 4.05
  ## 31st July
  - time: 226
    name: "August"
    parameters:
      c: 4.025899114317745
      testedBase: coldflu*tested/duration
      thetaI: symptomatic*tested/duration
      theta: testedBase + (1-testedBase)*thetaI + theta_U
      tested: tscale_fixed * 0.5
      eta: 0.44  #  trace 50% of the eta contacts who will be traced in one day with teams of tracers
      chi: 0.5  
  - time: 242
    name: "September"
    parameters:
      beta: 0.04558579801863469
      c: 5.938901554175569
      eta: 0.5
      ifr: 0.0059410686698366175
      tested: 0.018339697010270523
      testedBase: coldflu*tested/duration
      thetaI: symptomatic*tested/duration
      theta: testedBase + (1-testedBase)*thetaI + theta_U

  - time: 272 #1st Oct
    name: "October"
    parameters:
      beta: 0.04284616160082297
      c: 5.239993853538161
      eta: 0.5
      ifr: 0.006737751304383827
      tested: 0.3460738219780226
      eta: 0.50
      testedBase: coldflu*tested/duration
      thetaI: symptomatic*tested/duration
      theta: testedBase + (1-testedBase)*thetaI + theta_U
      
  - time: 287 #15th Oct
    name: "15October"
    parameters:
      beta: 0.04146653919561795
      c: 4.50914892968145
      ifr: 0.007066695480960346
      tested: 0.362795964469514
      eta: 0.50
      testedBase: coldflu*tested/duration
      thetaI: symptomatic*tested/duration
      theta: testedBase + (1-testedBase)*thetaI + theta_U

## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 410000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True

## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 420000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 430000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 440000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 450000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 460000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 470000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 480000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 490000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 500000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 510000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 520000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 530000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 540000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 550000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 560000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 570000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 580000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 590000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 600000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 610000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 620000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 630000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 640000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 650000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 660000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 670000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 680000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 690000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
## Lockdown trigger - needs to be higher than current cases to go on
  - condition: x[IU] + x[ID] - 700000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True


## Lockdown triggers - start from 31st July
## Release lockdown when below 10k cases
  - condition: x[IU] + x[ID] - 10000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 9000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 8000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 7000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 6000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 5000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 4000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 3000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 2500
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False
## Release lockdown when even lower
  - condition: x[IU] + x[ID] - 2000
    name: "Lockdown Trigger"
    after: 379
    direction: -1.0
    parameters:
      c: c0 * 0.8 # Lockdown release
      locked: False

## Lockdown trigger on 40k cases
  - condition: x[IU] + x[ID] - 40000
    name: "Lockdown Trigger"
    after: 379
    direction: 1.0
    parameters:
      c: c0 * 0.3 # Lockdown, Jarvis et al 2020: ~70% reduction in contacts
      locked: True
